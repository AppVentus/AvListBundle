
{% if list.getPager.haveToPaginate %}
{{ list.control|raw }}
{% endif %}
<script type="text/javascript">
    $(document).ready(function(){
        $(document).on('click', '#{{ list.options.container_id }} .pagination a, #{{ list.options.container_id }} .sortable a', function(event) {
            $('#canvasloader-container').fadeIn();
            event.preventDefault();
            $.ajax({
                url: $(this).attr('href'),
                context: document.body,
                type: "GET",
                success: function(data) {
                $('#canvasloader-container').fadeOut();
                $("#{{list.options.container_id}}").html(data);
                },
                error: function(data) {
                    $('#canvasloader-container').fadeOut();
                    alert("Il semble s'Ãªre produit une erreur");
                }
            });

            return false;
        });

        $('#{{ list.options.container_id }} thead th.sortable').each(function(){
            uri = "{{ path(list.options.route, list.options.route_parameters) }}";
            uri = updateQueryStringParameter('orderby', $(this).data('filter'), uri);
            uri = updateQueryStringParameter('way', "{{list.getWay}}", uri);
            title = $(this).html();
            link = '<a href="'+uri+'">'+title+'</a>';
            $(this).html(link);
        });
        function updateQueryStringParameter(key, value, uri) {
          var re = new RegExp("(&|\\?)"+key+"=[^\&]*", "i");
          separator = uri.indexOf('?') !== -1 ? "&" : "?";
          if (uri.match(re)) {
            return uri.replace(re, '$1' + key + "=" + value);
          }
          else {
            return uri + separator + key + "=" + value;
          }
        }

    });
</script>
<div id="canvasloader-container" style="display: none;"><img src="/bundles/avlist/images/ajax-loader.gif" title="Chargement en cours" alt="Chargement" width="32" height="32"></div>
